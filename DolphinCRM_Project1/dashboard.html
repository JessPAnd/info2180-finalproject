<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dolphin CRM Dashboard</title>
    <!--++++++++++++++STYLESHEET++++++++++++++++++-->
    <link rel="stylesheet" href="dashboard.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"/>
   
</head>



<body>
<!--++++++++++++++++++THE HEADER+++++++++++++++++-->
     <header>
        <div class="main--content">
           <div class="header--wrapper">
              <div class="header--title">
                <h3>Dolphin CRM</h3>
              </div>   
            </div>
        </div>  
     </header>

    <!--+++++++++++++++THE SIDEBAR+++++++++++++++++++-->
      <nav class = "sidebar">
         <div class ="dolphinLogo"></div>
           <ul class="menu">
              <li>
                  <a href="home.html">
                      <i class="fas fa-home"></i>
                      <span> Home</span>
                  </a>
              </li>
            <br>
              <li>
                   <a href="new-contact.html">
                     <i class="far fa-user-circle"></i>
                     <span>New Contact</span>
                   </a>
              </li>
            <br>
               <li>
                   <a href="users.html">
                     <i class="fas fa-users"></i>
                     <span>Users</span>
                   </a>
             </li>
            <br>
            <br>
               <li>
                   <a href="logout.html">
                     <i class="fa fa-sign-out"></i>
                     <span>Logout</span>
                   </a>
              </li>
          </ul>
     </nav>
                <!-- MAIN CONTENT -->
      <div class="table--menu">
          <div> 
            <button class="add-contact-btn">Add New Contact</button>
         </div>
         <br>
          <div class="filter-section">
              <label for="contactFilter">Filter:</label>
             <select id="contactFilter">
                <option value="all">All Contacts</option>
                <option value="sales">Sales Lead Only</option>
                <option value="support">Support Only</option>
                <option value="assigned">Assigned to Me</option>
             </select>
         </div>
         <br>

         <table id="contactTable">
            <thead>
               <tr>
                 <th>Title</th>
                 <th>Full Name</th>
                 <th>Email Address</th>
                 <th>Company</th>
                 <th>Contact Type</th>
                 <th>Details</th>
              </tr>
          </thead>
         <tbody>
            <!-- Contacts will be dynamically added here --> 
         </tbody>
         </table>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Select relevant DOM elements
            const contactFilter = document.getElementById("contactFilter");
            const contactTableBody = document.querySelector("#contactTable tbody");
            const addContactBtn = document.querySelector(".add-contact-btn");

            // Event listener for filter changes
            contactFilter.addEventListener("change", function () {
                // Implement logic to fetch and display contacts based on the selected filter
                fetchContacts(contactFilter.value);
            });

            // Event listener for "Add New Contact" button
            addContactBtn.addEventListener("click", function () {
                // Implement logic to open a modal or navigate to a new page for adding a new contact
                alert("Implement logic for adding a new contact here");
            });

            // Initial fetch for all contacts
            fetchContacts("all");

            // Function to fetch and display contacts
            function fetchContacts(filter) {
                // Replace the following with your actual API endpoint and logic
                fetch(`/api/contacts?filter=${filter}`)
                    .then(response => {
                        if (!response.ok) {
                            throw new Error(`HTTP error! Status: ${response.status}`);
                        }
                        return response.json();
                    })
                    .then(data => {
                        // Clear existing table rows
                        contactTableBody.innerHTML = "";

                        // Populate table with fetched contacts
                        data.forEach(contact => {
                            const row = document.createElement("tr");
                            row.innerHTML = `
                                <td>${contact.title}</td>
                                <td>${contact.fullName}</td>
                                <td>${contact.email}</td>
                                <td>${contact.company}</td>
                                <td>${contact.contactType}</td>
                                <td><a href="#" onclick="viewContactDetails(${contact.id})">View Details</a></td>
                            `;
                            contactTableBody.appendChild(row);
                        });
                    })
                    .catch(error => console.error("Error fetching contacts:", error));
            }

            // Function to handle viewing contact details
            function viewContactDetails(contactId) {
                // Implement logic to show details, for example, open a modal
                alert(`Implement logic to view details for contact with ID ${contactId}`);
            }
        });
    </script>
</body>
</html>
